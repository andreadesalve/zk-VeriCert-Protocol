# ğŸ§± Zero-Knowledge Proof Setup â€” DidProofKeccak  
Questo documento contiene i comandi necessari per compilare il circuito Circom, generare le chiavi di proving/verification e gestire le operazioni lato server (prover) e lato client (verifier).

---

## ğŸ“Œ 1. Compilazione del Circuito

```bash
# Compilare il circuito
circom DidProofKeccak.circom --r1cs --wasm --sym --c -l ../node_modules/

# Informazioni sul circuito
snarkjs r1cs info DidProofKeccak.r1cs
```

---

## âš¡ 2. Powers of Tau Ceremony

```bash
# Inizializzazione Powers of Tau
snarkjs powersoftau new bn128 19 pot19_0000.ptau -v

# Prima contribuzione
snarkjs powersoftau contribute pot19_0000.ptau pot19_0001.ptau --name="First contribution" -v

# Preparazione phase 2
snarkjs powersoftau prepare phase2 pot19_0001.ptau pot19_final.ptau -v

# Verifica Powers of Tau
snarkjs powersoftau verify ./pot19_final.ptau
```

---

## ğŸ”‘ 3. Generazione delle Chiavi di Prova e Verifica

```bash
# Generazione proving e verification key
snarkjs groth16 setup DidProofKeccak.r1cs pot19_final.ptau DidProofKeccak_0000.zkey

# Contribuzione zkey
snarkjs zkey contribute DidProofKeccak_0000.zkey DidProofKeccak_0001.zkey --name="root contribution" -v

# Final Beacon
snarkjs zkey beacon DidProofKeccak_0001.zkey circuit_final.zkey 0102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f 10 -n="Final Beacon phase2"

# Esportazione verification key
snarkjs zkey export verificationkey DidProofKeccak_0001.zkey verification_key.json
```

---

## âœ”ï¸ 4. Verifica della ZKey Finale

```bash
snarkjs zkey verify DidProofKeccak.r1cs pot19_final.ptau circuit_final.zkey
```

---

## ğŸ§© 5. Generazione del Solidity Verifier

```bash
snarkjs zkey export solidityverifier circuit_final.zkey verifier.sol
```

---

# ğŸ–¥ï¸ COMANDI SERVER (PROVER)

### File richiesti:
- DidProofKeccak.wasm
- circuit_final.zkey
- verification_key.json

### Opzionali:
- DidProofKeccak.r1cs
- DidProofKeccak.sym
- pot19_final.ptau

---

## ğŸ“ 1. Creazione Input  
Generare `input.json` dai dati applicativi (es. SSIOp.getDNSTXTSecret).

---

## ğŸ§® 2. Calcolo del Witness

```bash
node generate_witness.js DidProofKeccak.wasm input.json witness.wtns
```

---

## ğŸ› ï¸ 3. Generazione della Proof

```bash
snarkjs groth16 prove circuit_final.zkey witness.wtns proof.json public.json
```

---

## ğŸ” 4. Verifica della Proof (Server)

```bash
snarkjs groth16 verify verification_key.json public.json proof.json
```

---

# ğŸ“² COMANDI CLIENT (VERIFIER)

Recuperare:

- verification_key.json

---

## ğŸ” Verifica Locale

```bash
snarkjs groth16 verify verification_key.json public.json proof.json
```

---

## â›“ï¸ Verifica Onâ€‘Chain

```bash
snarkjs generatecall
```

---
